{
  "qgis_tutorial" : [
    {
      "id": "qgis_tutorial",
      "iframe": "",
      "featured-img": "/custom/publish1.jpg",
      "title": "1)How to share maps online",
      "jsfiddle": "https://jsfiddle.net/kdt8f2qg/3/",
      "javascript": "",
      "html": "<div id='github_link_div'></div>\n\n<div id='mappia_wrapper'>\n  <h4>List of video topics:</h4>\n  <ul id='mappia_video_topics'></ul>\n  <div style='width: 960px; height: 540px;' id='mappia_usage_vid'></div>\n</div>\n\n<div class='topic'>\n<h4>Parameter details:</h4>\n<ul>\n<li id='qigs_parm_zoom_level'><b>Zoom levels</b>: Determine the maximum scale.<br>\n* For each increased zoom/\"detail level\" the publication time doubles.<br>\n* The zoom level 9 is recommended for most cases, depends on how much details the map has <a target='_blank' href='https://wiki.openstreetmap.org/wiki/Zoom_levels'>[1]</a>.</li>\n<li id='qgis_repository_name'><b>Repository Name</b>: Define the name of the repository to store the map files.</li>\n<li id='qgis_git_client'><b>Git client</b>: The git parameter must be the path of the git executable. If not defined the plugin will download it automatically (windows only for now). The git client can be downloaded at <a href=\"https://git-scm.com/downloads\">https://git-scm.com/downloads</a>.</li>\n<li id='qgis_upload_maps'><b>Upload maps for further download</b>: The Github allows to upload binary files, but these files are limited to 2GB. We generate a Zip for all map associated files and upload this zip to the release section on the GitHub repository.</li>\n<li id='qgis_repository_username'><b>Username:</b>: To use this service you need to create a account at <a target='_blank' href='https://github.com'>GitHub</a> and use this account for Mappia QGIS plugin.</li>\n</ul>\n</div>"
    },
    {
      "id": "qgis_customizations",
      "iframe": "",
      "iframe2": "https://maps.csr.ufmg.br/editor/?queryid=188&extent=-443.628,-16.847,-407.373,3.294&tools=helpintro,layerchooser,zoomextent,customzoom,getfeature,hovershowlegend&options=hidestylechooser,enablequeries&visiblelayers=-1",
      "featured-img": "/custom/editquery1.jpg",
      "title": "2)Customize yourself a map project",
      "javascript": "",
      "html": "<h3>Get link of published maps</h3>\n\n<div><p>The maps you want to publish can be <i>shared through a link</i> or <i>embed at websites</i> like we embedded on the <a target=\"_blank\" href=\"https://csr.ufmg.br/amazones/\">AMAZONES</a> project. You can customize all aspects: layout, maps information, legends and even create interesting interactions. Mappia is <a target=\"_blank\" href=\"https://mappia.earth/documentation/\">fully documented with working examples</a>.<br>\nAll the platforms created in Mappia have an <mappia>editor mode</mappia>, and can be accessed by replacing the '/calculator/' by '/editor/' in platform url.</p>\n\n<i>Share the project using internal <mappia>link</mappia> or <mappia>embed</mappia> into a website:</i>\n<p>After finalizing publication, the '<mappia>Mappia</mappia> Publisher' (<qgis>QGIS</qgis> plugin) generate and opens a browser window with a link. To share the <mappi>link</mappi> is simple to display your own interactive Mappia platform using the provided data.<br>\nTo embed Mappia customizaed platform at a website you just need to copy and paste the following HTML code, copy paste this HTML code, just replace the 'src' url to the customized platform (HTML code):<br>\n<code> &lt;iframe src=\"//maps.csr.ufmg.br/calculator/?&amp;queryid=19 width=\"100%\" height=\"600\"&gt;&lt;/iframe&gt;</code></p>\n<i><mappia>Edit</mappia> any platform:</i>\n<p> Just edit or view a platform code just change the link url from '/calculator/' to '/editor/'. For example:<br>\nThe platform : <a target=\"_blank\" href=\"https://maps.csr.ufmg.br/calculator/?queryid=188\">https://maps.csr.ufmg.br/<mappia>calculator</mappia>/?queryid=188</a> <br>\ncan be Edited: <a target=\"_blank\" href=\"https://maps.csr.ufmg.br/editor/?queryid=188\">https://maps.csr.ufmg.br/<mappia>editor</mappia>/?queryid=188</a> .<br>\nThis project is focused on colaborative work, and was design to grant easy access and map sharing for all the comunity.<br>\nTake a look into our <a target=\"_blank\" href=\"https://mappia.earth/documentation/\">complete documentation</a> customization and combine maps from WMS/WMT/GitHub Repository, with no additional limitations.</p></div>"
    },
    {
      "id": "qgis_explanation",
      "others": ["//maps.csr.ufmg.br/calculator/?queryid=173&storeurl=https://raw.githubusercontent.com/asfixia/imoveisBH3/master/&zoomlevels=13&remotemap=GH:bairro;1,GH:circulacao_viarialine;1,GH:ponto_onibus;1", "160"],
      "iframe": "https://maps.csr.ufmg.br/calculator/?queryid=188&extent=-443.628,-16.847,-407.373,3.294&tools=helpintro,layerchooser,zoomextent,customzoom,getfeature,hovershowlegend&options=hidestylechooser,enablequeries&visiblelayers=-1",
      "featured-img": "/custom/share1_placehold.png",
      "title": "3)How the platform works",
      "javascript" : "window.Youtube.addCallback(function () {\n    window.player = new YT.Player('mappia_usage_vid', {\n        videoId: 'TAqVavBBsME',\n        playerVars: {\n            modestbranding: 0,\n            autoplay: 0,\n            controls: 1,\n            showinfo: 1,\n            mute: 1,\n            wmode: 'opaque',\n            loop: 1,\n            branding: 0,\n            rel: 0,\n            autohide: 0\n        },\n        events: {\n            onReady: function onPlayerReady(event) {\n                setInterval(function (){\n                    var current_time = event.target.getCurrentTime();\n                    for (var i = 0; i < markups.length - 1; i++) {\n                        if (markups[i + 1][1] > current_time) {break;}\n                    }\n                    var children = document.getElementById(\"mappia_video_topics\").children;\n                    for (var iC = 0; iC < children.length; iC++) children[iC].setAttribute('playing', iC == i ? 'true' : '');\n                }, 1000);\n            }\n        }\n    });\n});\n\nvar markups = [\n['Install the Mappia plugin.', 0],\n['Open the plugin \\'Mappia Publisher\\'.', 13],\n['Plugin parameters details.', 25],\n['Plugin usage example.', 36],\n['Log in to Github site and accept temporary permissions.', 50],\n['Publication proccess explained (waiting).', 75],\n['The result is Open in Browser.', 90],\n['Customize by visual editor or code', 101],\n['Interaction example: Pickpoint e Combobox.', 120],\n['Interaction example: Slider.', 135],\n['Interaction example: Textfield.', 145],\n['Sharing by link or embedding into a site.', 148],\n['Some platforms created with \\'Mappia\\'.', 166],\n['Documentation API overview.', 194]\n];\n\nvar markupList = [];\nfor (var i = 0; i < markups.length; i++) {\n    markupList.push(\"<li><a data-timer='\"+markups[i][1]+\"' href='javascript:window.player.seekTo(\"+markups[i][1]+\");'>\"+markups[i][0]+\" (\" + markups[i][1]+ \"s)</a></li>\");\n}\ndocument.getElementById(\"mappia_video_topics\").innerHTML = markupList.join(\"\");",
      "html": "<script type='text/javascript'>var pathname = window.location.href;\nif (pathname.indexOf('github_callback') != -1) {\n  alertify.alert('Credentials validated and publication authorized!', 'Please, check back in QGIS if process is runing or waiting for confirmation.\n<br>The publication can take some time, meanwhile take a look at Mappia examples and API. <img src=\"/assets/img/custom/qgis_continue_yes.png\"/>', function(){});\n  if (pathname.indexOf('github_callback') != -1) {var repoLink = pathname.substr(pathname.indexOf('github_callback') + 'github_callback'.length + 1); document.getElementById('github_link_div').innerHTML = 'The repository link with published maps is: <a href=\"' + repoLink + '\">' + repoLink + '</a>';\n}}</script><h3>Example of a platform created in QGIS</h3>\nThe below example link is: <a target='_blank' href='https://maps.csr.ufmg.br/calculator/?queryid=188&extent=-443.628,-16.847,-407.373,3.294&tools=helpintro,layerchooser,zoomextent,customzoom,getfeature,hovershowlegend&options=hidestylechooser,enablequeries&visiblelayers=-1'>https://maps.csr.ufmg.br/calculator/?queryid=188</a> and the data is stored on github: <a target='_blank' href='https://github.com/asfixia/Mappia_Example_d'>https://github.com/asfixia/Mappia_Example_d</a>.<h3>How the publication works?</h3>\n\n<div>\n<p>\nThis service is composed of three main components: <qgis><a href='#qgis_rendering'>QGIS</a></qgis> for Map rendering, <gh><a href='#gh_storage'>GitHub</a></gh> for File Storage and <mappia><a href='#mappia_display'>Mappia</a></mappia> for integration and display results.\n</p>\n<i id='qgis_rendering'><qgis>QGIS</qgis> for Map rendering:</i>\n<p>\nThis step consists mainly of generating tiles (tiles are graphical representation of a small part of the map) for online displaying through a range of <a href=\"#qigs_parm_zoom_level\">zoom levels</a>. At each given position and scale, one tile is displayed, and all tiles put together create the visualization of the map. The style of the map is the same of that of QGIS, so you can define the map style in QGIS and view it online.<br>\nThe plugin developped in QGIS will generate the tiles and upload it to GitHub.\n</p>\n<i id='gh_storage'><gh>GitHub</gh> for File Storage:</i>\n<p>\nThis step is mainly about authenticating the file storage. The GitHub is a free online repository used to store the map tiles, metadata, legends and any other information about the maps.<br>\nTo communicate with the GitHub site a '<a href='#qgis_git_client'>Git client</a>' is mandatory and is automatically downloaded if not found, the client consists of a program that implements the protocol of message exchange at their server (the official Git executable can be found at <a target='_blank' href='https://git-scm.com/downloads/guis/'>https://git-scm.com/downloads/guis/</a>).\nThe repository is a place where all the data is stored, it is identified by a combination of a '<a href='#qgis_repository_name'>Repository name</a>' and an '<a href='#qgis_repository_username'>Username</a>'. The repository can be accessed replacing the uppercase words in link https://github.com/USERNAME/REPOSITORY_NAME for their respective values.<br>\nThe data stored in GitHub are fully under the control of the account owner, the Mappia has no control of it. You can publish, delete, edit data on your own without Mappia interference.\n</p>\n<i id='mappia_display'><mappia>Mappia</mappia> for integration and results display:</i>\n<p>\nMappia offers a free service to display maps oonline (like WMS or WTS) along with customization advantages. Mappia integrates the QGIS generated tiles stored at GitHub. Mappia allows map customization by using a user-friendly interface or directly developing by javascript code. It is very useful for educational purposes, collaborative mapping, maps sharing or any other projects.<br>\nMappia identifies all maps at GitHub repositories and allows the user to display them in many customized ways using various predefined elements and interactions described at <a target='_blank' href='https://mappia.eath'>mappia.earth</a>. To display the maps Mappia platform just loads the map tiles and squares them at the right geographic position directly from the GitHub. This allows it to work even without a private server.<br>\nThe user can even share his source maps (Github has a 2GB Map limit size), this is controlled by parameter '<a href='#qgis_upload_maps'>Upload maps</a>', and the others users can easily download directly from the Mappia platform.\n</p></div>"
    },
    {
      "id": "qgis_faq",
      "iframe": "",
      "featured-img": "/icons/icons8-faq-30.png",
      "title": "4)Mappia Publisher usage FAQ",
      "javascript": "",
      "html": "<h3>Frequently asked questions.</h3>\n\n<ul>\n<li>How the plugin works?<br>\n<response>View on this tutorial <a href=\"#qgis_tutorial\">How the publication works?</a></response></li>\n<li>What is the map size limit?<br>\n<respose>The maximum size is 2Gb. This is limited by the <a target='_blank' href=\"https://help.github.com/en/github/managing-large-files/distributing-large-binaries\">GitHub documentation</a>.</respose></li>\n<li>I keep the control of my file maps?<br>\nOf course, you can upload, delete and edit maps. Mappia just displays them from repository</li>\n<li>How much costs?<br>\n<response>Mappia is free of charge!</response></li>\n<li>There are plugins for others softwares?<br>\nSoon, for <a target='_blank' href='https://www.csr.ufmg.br/dinamica'>Dinamica EGO</a> but not yet.</li>\n<li>What are the legal responsabilities?<br>\n<response>We offer the service, the usage and the data delivered through is of the entire responsability of each user.</response></li>\n<li>How do you profit?<br>\n<response>We just want to disseminate our knowledge, (<a target='_blank' href='https://csr.ufmg.br/csr'>csr.ufmg.br/csr</a>) and research results.</response></li>\n</ul>"
    }
  ]
}
